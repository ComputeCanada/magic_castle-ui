<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <style>
        [v-cloak], [v-cloak] * {
            display: none;
        }
    </style>
</head>
<body>
<div id="app">
    <v-app
     v-cloak
     style="background: #eef3f3"
    >
        <v-app-bar
            dense
            color="primary"
            dark
        >
            <v-toolbar-title>Magic Castle UI</v-toolbar-title>

        </v-app-bar>
        <v-container>
            <v-card
                max-width="500"
                class="mx-auto"
                :loading="loading"
                :disabled="loading"
            >
                <v-card-title
                    class="mx-auto"
                >
                    Cluster creation
                </v-card-title>
                <v-card-text>
                    <v-form @submit.prevent="createCluster">
                        <v-text-field v-model="magicCastle.cluster_name"
                                      label="Cluster name"></v-text-field>
                        <v-text-field v-model="magicCastle.domain"
                                      label="Domain"></v-text-field>
                        <v-text-field v-model="magicCastle.image"
                                      label="Image"></v-text-field>
                        <v-text-field v-model.number="magicCastle.nb_users"
                                      type="number"
                                      label="Number of users"></v-text-field>

                        <!-- Instances -->
                        <v-text-field v-model="magicCastle.instances.mgmt.type"
                                      label="Management (mgmt) instance type"></v-text-field>
                        <v-text-field v-model.number="magicCastle.instances.mgmt.count"
                                      type="number"
                                      label="Management (mgmt) instance count"></v-text-field>
                        <v-text-field v-model="magicCastle.instances.login.type"
                                      label="Login instance type"></v-text-field>
                        <v-text-field v-model.number="magicCastle.instances.login.count"
                                      type="number"
                                      label="Login instance count"></v-text-field>
                        <v-text-field v-model="magicCastle.instances.node.type"
                                      label="Node instance type"></v-text-field>
                        <v-text-field v-model.number="magicCastle.instances.node.count"
                                      type="number"
                                      label="Node instance count"></v-text-field>

                        <!-- Storage -->
                        <v-text-field v-model="magicCastle.storage.type"
                                      label="Storage type"></v-text-field>
                        <v-text-field v-model.number="magicCastle.storage.home_size"
                                      type="number"
                                      label="Storage home size (GiB)"></v-text-field>
                        <v-text-field v-model.number="magicCastle.storage.project_size"
                                      type="number"
                                      label="Storage project size (GiB)"></v-text-field>
                        <v-text-field v-model.number="magicCastle.storage.scratch_size"
                                      type="number"
                                      label="Storage scratch size (GiB)"></v-text-field>

                        <v-text-field v-model="magicCastle.public_keys[0]"
                                      label="Public key"></v-text-field>

                        <v-text-field v-model="magicCastle.guest_passwd"
                                      label="Guest password (optional)"></v-text-field>

                        <v-text-field v-model="magicCastle.os_floating_ips[0]"
                                      @change="osFloatingIpsUpdated"
                                      label="OpenStack floating IP (optional)"></v-text-field>

                        <v-btn type="submit" color="primary"
                               class="text-right"
                               :loading="loading"
                               :disabled="loading"
                               large
                        >Spawn
                        </v-btn>
                    </v-form>
                </v-card-text>
            </v-card>
        </v-container>
        <v-dialog v-model="successDialog"
                  max-width="400">
            <v-card
            >
                <v-card-title>Success</v-card-title>
                <v-card-text>
                    Your cluster was created successfully.<br><br>
                    Don't forget to destroy it when you are done!
                </v-card-text>
                <v-divider></v-divider>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="primary" text @click="successDialog = false">Close</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>
        <v-dialog v-model="errorDialog"
                  max-width="400">
            <v-card
            >
                <v-card-title>Error</v-card-title>
                <v-card-text>
                    {{ errorMessage }}
                </v-card-text>
                <v-divider></v-divider>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="primary" text @click="errorDialog = false">Close</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>
    </v-app>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
<script src="index.js"></script>
</body>
</html>